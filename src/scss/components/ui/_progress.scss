// =========================================================================
// PROGRESS COMPONENT
// components/ui/_progress.scss
// -------------------------------------------------------------------------
// Linear and circular progress indicators for loading states and UI feedback.
// Supports:
// - Linear progress bars with label, size, color, and indeterminate states
// - Circular progress indicators with small/large/secondary/light variants
// - Animations: indeterminate linear, circular rotation
// =========================================================================

// -------------------------------------------------------------------------
// Tokens / Defaults
// -------------------------------------------------------------------------
// Default height, color, and CSS variables for the progress component

$progress-height: 		4px !default;
$progress-color:		#42a5f5 !default;

// -------------------------------------------------------------------------
// Base Linear Progress
// -------------------------------------------------------------------------
// Styles for the default linear progress bar and container

.progress {

	// Scoped tokens
	--progress-height:				#{$progress-height};
	--progress-color:				#{$progress-color};

	// Set height if children exist
	&:has(> .progress-bar) {
		height: var(--progress-height);
	}

	vertical-align: baseline;
	display: block;
	width: 100%;
	height: 12px;
	border: 0;
	background-color: #f8f8f8;
	margin-bottom: 20px;

	* + .progress {
		margin-top: 20px;
	}

	&::-webkit-progress-bar {
		background-color: transparent;
	}

	&::-webkit-progress-value {
		background-color: #1e87f0;
		transition: width 0.6s ease;
	}

	&::-moz-progress-bar {
		background-color: #1e87f0;
		transition: width 0.6s ease;
	}


	position: relative;
	max-width: 100%;
	box-shadow: none;
	background: rgba(0,0,0,.1);
	border-radius: 6px;
	display: flex;

	// -------------------------------------------------------------------------
	// Label
	// -------------------------------------------------------------------------
	// Optional labels displayed above the progress bar

	&-label {
		position: absolute;
		bottom: 100%;
		font-size: 12px;
		width: 100%;
		color: rgba(0,0,0,.54);
		font-weight: 500;
		margin-bottom: 4px;
		text-align: center;
		&-enabled {
			margin-top: 28px;
		}
	}

	// -------------------------------------------------------------------------
	// Progress Bar
	// -------------------------------------------------------------------------
	// Inner bar element, color variants, and sizing

	&-bar {
		position: relative;
		//height: 4px !important;
		min-width: 12px;
		//background: #bdbdbd;
		//background: #127bee;
		background: var(--progress-color);
		transition: width 360ms cubic-bezier(.55,0,.1,1), background-color 140ms cubic-bezier(.55,0,.1,1);
		color: #fff;
		box-sizing: border-box;
		text-align: center;
		overflow: hidden;

		&.color {
			&-orange {
				background: #ffca28;
			}
			&-red {
				background: #ef5350;
			}
			&-green {
				background: #66bb6a;
			}
		}
	}

	// -------------------------------------------------------------------------
	// Size Variants
	// -------------------------------------------------------------------------
	// Medium and large size modifiers with adjusted heights and border-radius

	&-medium {
		.progress-bar {
			height: 8px;
			font-size: 10px;
			line-height: 8px;
		}
	}
	&-large {
		.progress-bar {
			height: 16px;
			font-size: 11px;
			line-height: 17px;
		}
	}
	&-medium,
	&-large {
		border-radius: 15px;
		.progress-bar {
			border-radius: 15px;
		}
		&.progress-group {
			.progress-bar {
				border-radius: 15px 0 0 15px;
				+ .progress-bar {
					border-radius: 0;
				}
				&:last-child {
					border-radius: 0 15px 15px 0;
				}
			}
		}
	}

	// -------------------------------------------------------------------------
	// Indeterminate
	// -------------------------------------------------------------------------
	// Animated state for progress bar when loading duration is unknown

	&-indeterminate {
		overflow: hidden;
		.progress-bar {
			width: 100%;
			animation: indeterminate 2800ms infinite linear;
		}
	}
}

// -------------------------------------------------------------------------
// Circular Progress
// -------------------------------------------------------------------------
// Circular spinner variant with small/large/secondary/light options

.progress-circular {
	border: 4px solid rgba(0, 0, 0, .12);
	border-top: 4px solid #2F6F8C;
	border-radius: 50%;
	width: 24px;
	height: 24px;
	animation: circular-animation 800ms linear infinite;
	display: inline-block;
	&-small {
		width: 12px;
		height: 12px;
		border-width: 2px;
	}
	&-large {
		width: 48px;
		height: 48px;
		border-width: 8px;
	}
	&-secondary {
		border-top-color: #d50000;
	}
	&-light {
		border-color: rgba(0,0,0,.2);
		border-top-color: rgba(255,255,255,.9)
	}
}

// -------------------------------------------------------------------------
// Keyframes / Animations
// -------------------------------------------------------------------------
// Animation definitions for circular rotation and indeterminate bar

@keyframes circular-animation {
	0% { transform: rotate(0deg); }
	100% { transform: rotate(360deg); }
}

@keyframes indeterminate {
	0% { transform: translateX(-100%) scaleX(0.2); }
	20% { transform: translateX(-40%) scaleX(0.2); }
	30% { transform: translateX(0%) scaleX(0.5); }
	55% { transform: translateX(100%) scaleX(0.7); }
	55.99% { transform: scaleX(0); }
	56% { transform: translateX(-100%) scaleX(0); }
	56.99% { transform: translateX(-100%) scaleX(0.6); }
	75% { transform: translateX(-5%) scaleX(0.6); }
	85% { transform: translateX(30%) scaleX(0.3); }
	98% { transform: translateX(100%) scaleX(0.2); }
	99.99% { transform: scaleX(0); }
	100% { transform: translateX(-100%); }
}