// ============================================
// FEED COMPONENT
// components/content/_feed.scss
// --------------------------------------------
// Displays a grid or single-row list of feed items.
// Supports infinite scroll, load more, and end markers.
// Fully themeable via design tokens and responsive layouts.
// ============================================


@use '../../abstracts/variables/breakpoints' as *;

// --------------------------------------------
// Base Container
// --------------------------------------------

.feed {
	display: flex;
	flex-wrap: wrap;
	gap: var(--spacing-default);
	padding: var(--spacing-default);
	justify-content: center;
}


// --------------------------------------------
// Feed Items (optional)
// --------------------------------------------

// .feed > * {
// 	background-color: var(--color-surface);
// 	border: 1px solid var(--color-border);
// 	border-radius: var(--radius-default);
// 	padding: var(--spacing-default);
// 	box-shadow: var(--shadow-md);
// 	color: var(--color-text);
// 	transition:
// 		transform var(--transition-medium),
// 		box-shadow var(--transition-medium);
// }

// --------------------------------------------
// Feed Items: Default Styling
// --------------------------------------------

.feed-item-default {
    > * {
        background-color: var(--color-surface);
        border: 1px solid var(--color-border);
        border-radius: var(--radius-default);
        padding: var(--spacing-default);
        box-shadow: var(--shadow-md);
        color: var(--color-text);
        transition:
            transform var(--transition-medium),
            box-shadow var(--transition-medium);
    }
}

// Grid Layout (default)
.feed:not(.single-row) > * {
    width: calc(33.333% - var(--spacing-default));
}

// Single Row Layout
.feed.single-row > * {
	width: 100%;
}

//  (optional)
.feed > *:hover {
	//transform: translateY(-5px);
	//box-shadow: var(--shadow-lg);
}

// Hover Effect (optional)
.feed-item-hover {
    > *:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-lg);
    }
}

// --------------------------------------------
// Load More Button
// --------------------------------------------

.feed-load-more {
	display: inline-block;
	margin: var(--spacing-xxl) auto;
	padding: var(--spacing-sm) var(--spacing-lg);
	border-radius: var(--radius-default);
	background-color: var(--color-surface-muted);
	color: var(--color-text);
	font-size: var(--font-size-base);
	font-weight: var(--font-weight-medium);
	text-align: center;
	border: 1px solid var(--color-border);
	cursor: pointer;
	transition:
		background-color var(--transition-fast),
		transform var(--transition-fast);

	&:hover {
		background-color: var(--color-hover-surface);
		transform: translateY(-2px);
	}

	&:active {
		transform: translateY(0);
	}

	&:disabled,
	&[disabled] {
		opacity: 0.5;
		cursor: not-allowed;
		pointer-events: none;
		background-color: var(--color-surface-muted);
		color: var(--color-text-muted);
		border-color: var(--color-border-muted);
	}

	&.loading {
		cursor: progress;
		pointer-events: none;
		background-color: var(--color-surface-muted);
		color: var(--color-text-secondary);
	}
}

// --------------------------------------------
// Feed End Message
// --------------------------------------------

.feed-end {
	display: table;
	margin: var(--spacing-xxl) auto;
	padding: var(--spacing-xs) var(--spacing-md);
	text-align: center;
	color: var(--color-text-muted);
	background-color: var(--color-surface-muted);
	border: 1px solid var(--color-border-muted);
	border-radius: var(--radius-default);
}

// --------------------------------------------
// Loading Spinner (Infinite Scroll)
// --------------------------------------------

.feed-spinner {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 100%;
	padding: var(--spacing-xxl);
	opacity: 0.8;

	&::after {
		content: '';
		display: block;
		width: var(--size-lg);
		height: var(--size-lg);
		border: 3px solid var(--color-border);
		border-top-color: var(--color-primary);
		border-radius: 50%;
		animation: spin 1s linear infinite;
	}
}

// --------------------------------------------
// Infinite Scroll Trigger Marker
// --------------------------------------------

.feed-scroll-trigger {
	width: 100%;
	height: 1px;
	position: relative;
	top: -1px;
	background: transparent;
}

// --------------------------------------------
// Fade-In Animation for New Items
// --------------------------------------------

.feed > .feed-item {
	opacity: 0;
	transform: translateY(20px);
	animation: fadeInUp 0.5s ease forwards;
}

@keyframes fadeInUp {
	from {
		opacity: 0;
		transform: translateY(20px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes spin {
	to {
		transform: rotate(360deg);
	}
}

// --------------------------------------------
// Responsive Layouts
// --------------------------------------------

@media (max-width: $breakpoint-md) {
	.feed:not(.single-row) > * {
		width: calc(50% - var(--spacing-default));
	}
}

@media (max-width: $breakpoint-sm) {
	.feed:not(.single-row) > * {
		width: 100%;
	}
}
