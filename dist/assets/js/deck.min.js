var O=class{constructor(e){this.eventName=e,this.callbacks=[]}registerCallback(e){this.callbacks.push(e)}unregisterCallback(e){let t=this.callbacks.indexOf(e);t>-1&&this.callbacks.splice(t,1)}fire(e){this.callbacks.slice(0).forEach(s=>{s(e)})}},v=class{constructor(){this.host=window.location.host,this.wss=null,this.state={reconnection:!0,reconnectionDelay:1e3},this.events={}}connect(){this.wss=new WebSocket(`wss://${this.host}`),this.wss.onmessage=e=>{if(typeof e.data=="string")try{let t=JSON.parse(e.data);t.channel?this.emit(t.channel,t):this.emit(t.event,t.data)}catch{this.say("Unknown signal","danger")}},this.wss.onopen=()=>{document.dispatchEvent(new CustomEvent("deck.wss.open")),this.emit("wssConnect")},this.wss.onclose=e=>{document.dispatchEvent(new CustomEvent("deck.wss.close")),this.emit("wssDisconnect"),this.state.reconnection&&(this.wss===null||this.wss.readyState==3)&&setTimeout(()=>{this.connect()},this.reconnectionDelay)},this.wss.onerror=e=>{document.dispatchEvent(new CustomEvent("deck.wss.error"),{detail:{error:e.message}}),this.emit("wssDisconnect"),this.wss.close()}}disconnect(){this.wss?.readyState===this.wss?.OPEN&&(this.state.reconnection=!1,this.wss.close())}isConnected(){return this.wss.readyState!==this.wss.OPEN}wssState(){return this.wss.readyState}send(e){this.wss&&this.wss.readyState===this.wss.OPEN&&this.wss.send(JSON.stringify(e))}emit(e,t){let s=this.events[e];s&&s.fire(t);let i=n=>n.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1");Object.entries(this.events).forEach(([n,o])=>{n.includes("*")&&new RegExp("^"+n.split("*").map(i).join(".*")+"$").test(e)&&o.fire(t)})}on(e,t){let s=this.events[e];s||(s=new O(e),this.events[e]=s),s.registerCallback(t)}off(e,t){let s=this.events[e];s&&s.callbacks.indexOf(t)>-1&&(s.unregisterCallback(t),s.callbacks.length===0&&delete this.events[e])}hasEvent(e){return e in this.events}destroyEvent(e){delete this.events[e]}};var w=class{constructor(e){e||(e=document.querySelector("aside")),this.element=e,this.menu=document.querySelector(".menu"),this.toggle=document.getElementById("sidebar-toggle"),this.#e()}#e(){this.menu&&(this.#t(),this.#i(),this.#n())}#t(){if(!this.toggle)return;let e=document.body,t=localStorage.getItem("deck_sidebar_open")!==null;e.classList.toggle("sidebar-hidden",!t),this.toggle.classList.toggle("open",t),this.toggle.addEventListener("click",()=>{let s=e.classList.toggle("sidebar-hidden");this.toggle.classList.toggle("open",!s),s?(localStorage.removeItem("deck_sidebar_open"),this.#s("open")):(localStorage.setItem("deck_sidebar_open","true"),this.#s("close"))})}#s(e){let t={open:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M140-254.62V-300h680v45.38H140Zm0-202.69v-45.38h680v45.38H140ZM140-660v-45.38h680V-660H140Z"/></svg>',close:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M140-260v-45.39h488.46V-260H140Zm648-47L613.62-480.62l173.76-172.99L820-621 678.84-480.62l141.77 141L788-307ZM140-458.92v-45.39h371.54v45.39H140Zm0-195.69V-700h488.46v45.39H140Z"/></svg>'};this.toggle.innerHTML=t[e]}#i(){this.menu?.addEventListener("click",e=>{let t=e.target.closest("li");if(!t?.querySelector(".submenu"))return;t.classList.toggle("open"),Array.from(this.menu.querySelectorAll("li.open")).filter(i=>i!==t).forEach(i=>i.classList.remove("open"))})}#n(){let e=window.location.pathname.replace(/(\?.*)?$/,""),t=document.querySelector(`a[href='${e}']`)?.parentElement;t&&(t.classList.add("active"),t.getAttribute("title")!=="Documentation"&&t.closest(".submenu")?.parentNode.classList.add("open"),document.querySelector(".sidebar .active")?.scrollIntoView({behavior:"instant",block:"center"}))}show(){}hide(){}open(e){}close(e){}};var b=class{constructor(e){e||(e=document.getElementById("header")),this.element=e,this.megaMenu=document.getElementById("mega-menu"),this.megaMenuToggle=document.getElementById("mega-menu-toggle");let t=document.querySelector(".navbar-right");this.nav=t?t.querySelector(".navbar-nav"):null,this.#e()}#e(){this.megaMenu&&this.#t(),this.nav&&this.initializeNav()}#t(){this.megaMenuToggle&&this.megaMenuToggle.addEventListener("click",()=>{this.megaMenu.classList.toggle("open")?(this.#s("close"),document.body.classList.add("no-scroll")):(this.#s("open"),document.body.classList.remove("no-scroll"))})}#s(e){let t={open:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M140-254.62V-300h680v45.38H140Zm0-202.69v-45.38h680v45.38H140ZM140-660v-45.38h680V-660H140Z"/></svg>',close:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="m250.92-218.92-32-32L448-480 218.92-709.08l32-32L480-512l229.08-229.08 32 32L512-480l229.08 229.08-32 32L480-448 250.92-218.92Z"/></svg>'};this.megaMenuToggle.innerHTML=t[e]}initializeNav(){this.nav.addEventListener("click",e=>{let t=e.target.closest("a");if(!t)return;let s=t.getAttribute("href");s&&(s==="/auth/logout"?(e.preventDefault(),this.handleLogout()):window.location.href=s)})}#i(){let t=()=>{window.scrollY>2?this.element.classList.add("elevated"):this.element.classList.remove("elevated")};this._onScroll=t,window.addEventListener("scroll",t,{passive:!0}),t()}async handleLogout(){try{(await fetch("/auth/logout",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin"})).ok?window.location.href="/":Deck.say("Logout failed","danger")}catch{Deck.say("Logout failed","danger")}}};var y=class{storageKey="theme-preference";rootElement=document.documentElement;constructor(){this.themeToggleButtons=document.querySelectorAll("[data-theme-toggle]"),this.iconToggleButton=document.querySelector(".theme-toggle-icon"),console.log(this.iconToggleButton),console.log("start"),this.init()}init(){this.applyInitialTheme(),this.addEventListeners()}addEventListeners(){this.themeToggleButtons.forEach(t=>{t.addEventListener("click",s=>{let i=s.currentTarget.dataset.themeToggle;this.setTheme(i)})}),this.iconToggleButton&&this.iconToggleButton.addEventListener("click",()=>{let t=this.getSavedPreference()||"system",s=this.getNextTheme(t);this.setTheme(s)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{this.getSavedPreference()==="system"&&this.applySystemTheme()})}getNextTheme(e){return{light:"dark",dark:"system",system:"light"}[e]}updateIconButton(e){if(!this.iconToggleButton)return;let t={light:"\u{1F506}",dark:"\u{1F319}",system:"\u{1F5A5}\uFE0F"},s={light:"Light theme",dark:"Dark theme",system:"System theme"};this.iconToggleButton.innerText=t[e]||"\u{1F5A5}\uFE0F",this.iconToggleButton.setAttribute("aria-label",s[e]||"System theme"),this.iconToggleButton.setAttribute("title",s[e]||"System theme")}applyInitialTheme(){let e=this.getSavedPreference();this.setTheme(e||"system")}setTheme(e){e==="system"?(this.applySystemTheme(),this.savePreference("system")):(this.applyThemeClass(e),this.savePreference(e)),this.updateButtonState(e),this.updateIconButton(e)}applySystemTheme(){window.matchMedia("(prefers-color-scheme: dark)").matches?this.applyThemeClass("dark"):this.applyThemeClass("light")}applyThemeClass(e){this.rootElement.classList.remove("light","dark"),e&&this.rootElement.classList.add(e)}updateButtonState(e){this.themeToggleButtons.forEach(s=>{s.dataset.themeToggle===e?(s.classList.add("active"),s.setAttribute("aria-pressed","true")):(s.classList.remove("active"),s.setAttribute("aria-pressed","false"))});let t=document.querySelector(".theme-slider-indicator");if(t){let s=[...this.themeToggleButtons].find(i=>i.dataset.themeToggle===e);if(s){let i=s.getBoundingClientRect(),n=s.parentElement.getBoundingClientRect();t.style.transform=`translateX(${i.left-n.left}px)`}}}getSavedPreference(){return localStorage.getItem(this.storageKey)}savePreference(e){localStorage.setItem(this.storageKey,e)}};var L=class{#e;#t;constructor(){this.html=document.documentElement,this.body=document.body,this.window=document.window,this.$main=document.getElementById("main"),this.$sidebar=document.getElementById("sidebar"),this.$header=document.getElementById("header"),this.$footer=document.getElementById("footer"),this.$options=document.getElementById("options"),this.$loading=document.querySelector(".loading"),this.#s()}#s(){this.#i(),this.#n(),this.#a(),this.#c(),this.#u(),this.#p(),this.#d(),this.#r(),this.#m(),this.#h(),this.initInput(),this.initFabSpeedDials(),this.initFabSheets(),this.initAvatars(),this.observeAvatarMutations(),this.#l()}#i(){document.getElementById("header")&&(this.header=new b)}#n(){let e=document.querySelector("aside");if(e&&(e.classList.contains("sidebar-secondary")&&(this.sidebar=new w),e.classList.contains("sidebar-main"))){let t=e.querySelectorAll(".nav-item"),s=window.location.pathname.replace(/\/+$/,"").toLowerCase();t.forEach(i=>{i.getAttribute("href")?.replace(/\/+$/,"").toLowerCase()===s?i.classList.add("active"):i.classList.remove("active")})}}#a(){console.log("init theme"),this.theme=new y}#r(){window.addEventListener("load",()=>{this.showLoadingAnimation(),setTimeout(()=>{this.hideLoadingAnimation()},1e3)})}showLoadingAnimation(){this.$loading&&(this.$loading.style.display="block")}hideLoadingAnimation(){this.$loading&&(this.$loading.style.display="none")}#l(){document.querySelectorAll("pre > code").forEach(e=>{let t=e.textContent.split(`
`);for(;t.length&&t[0].trim()==="";)t.shift();for(;t.length&&t[t.length-1].trim()==="";)t.pop();let s=t.reduce((i,n)=>{if(n.trim()==="")return i;let o=n.match(/^(\s*)/),a=o?o[1].length:0;return i===null?a:Math.min(i,a)},null);s&&s>0&&(t=t.map(i=>i.slice(s))),e.textContent=t.join(`
`)})}addClass(e,t){!e||!t||(t=t?t.split(" "):[],e.classList.add(...t))}removeClass=(e,t)=>{!e||!t||(t=t?t.split(" "):[],e.classList.remove(...t))};toggleClass=(e,...t)=>t.map(s=>e.classList.toggle(s));getElement=(e,t=document)=>e instanceof HTMLElement?e:typeof e=="string"?t.querySelector(e):null;getElements=(e,t=document)=>e instanceof NodeList?e:typeof e=="string"?t.querySelectorAll(e):null;showElement(e,t="inherit"){e&&(e.style.display=t)}hideElement(e,t="none"){e&&(e.style.display=t)}isVisible(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}setAttributes(e,t){e&&Object.keys(t).forEach(s=>e.setAttribute(s,t[s]))}removeAttributes(e,...t){e&&t.forEach(s=>e.removeAttribute(s))}setStyle(e,t={}){if(e)for(let s in t)e.style[s]=t[s]}setTheme(e="dark"){document.documentElement.classList.add(e)}removeTheme(e="dark"){document.documentElement.classList.remove(e)}removeElement(e,t){t?setTimeout(function(){e.remove()},t):e.remove()}#c(){window.addEventListener("touchstart",function e(){document.body.classList.add("touch-device"),window.TOUCH_DETECTED=!0,window.removeEventListener("touchstart",e,!1)},!1),document.body.addEventListener("click",e=>{e.target.classList.contains("dropdown-close")&&UIkit.dropdown($(e.target).closest(".dropdown")).hide(),e.target.matches('a[href="#"]')&&e.preventDefault()}),document.body.addEventListener("focus",e=>{e.target.matches("[data-input]")&&e.target.closest(".input-wrapper").classList.add("input-focus")},!0),document.body.addEventListener("blur",e=>{if(e.target.matches("[data-input]")){let t=e.target;t.closest(".input-wrapper").classList.remove("input-focus"),t.classList.contains("label-fixed")||(t.value!==""?t.closest(".input-wrapper").classList.add("input-filled"):t.closest(".input-wrapper").classList.remove("input-filled"))}},!0),document.body.addEventListener("input",e=>{if(e.target.matches("[data-input]")){let t=e.target;t.classList.contains("label-fixed")||(t.value!==""?t.closest(".input-wrapper").classList.add("input-filled"):t.closest(".input-wrapper").classList.remove("input-filled")),this.#o(t)}},!0),document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".code-tab")&&document.body.addEventListener("click",e=>{let s=e.target.closest(".code-tab > .iconnav > li > a");if(s){let i=s.closest(".code-tab");if(i){let n=i.querySelector(".tab-content > div:first-child");if(n){let o=n.innerHTML.trim();navigator.clipboard.writeText(o).then(()=>{Deck.say("HTML content copied to clipboard.","primary")}).catch(a=>{console.error("Failed to copy HTML content:",a)})}}}})})}preloader(e,t,s){e&&(e.innerHTML='<div class="'+(s||"")+' flex flex-center flex-middle height-1-1 animation-fade js-preloader width-1-1" data-spinner="ratio: '+(t||2)+'"></div>')}frameYoutube(e,t="300px",s="100%"){var i=document.createElement("iframe");return i.src=`https://www.youtube.com/embed/${e}`,i.width=t,i.height=s,i.frameborder="0",i.allowfullscreent="1",i}maxWidth(e){switch(e){case"smallMax":return window.matchMedia("(max-width: 959px)").matches;case"mediumMin":return window.matchMedia("(min-width: 960px)").matches;case"mediumMax":return window.matchMedia("(max-width: 1199px)").matches;case"largeMin":return window.matchMedia("(min-width: 1200px)").matches;case"largeMax":return window.matchMedia("(max-width: 1599px)").matches;case"xlargeMin":return window.matchMedia("(min-width: 1600px)").matches}}spinnerShow(e,t,s,i){var n=t||document.body,o=e?'<div class="spinner"></div>':'<div class="'+(i||"md-color-light-blue-500")+'" spinner="ratio: '+(s||1)+'"></div>',a=n===document.body?" fixed":"";n.insertAdjacentHTML("beforeend",`<div class="spinner-overlay ${a}">${o}</div>`),setTimeout(function(){document.querySelector(".spinner-overlay").classList.add("enter")},50)}spinnerHide(){var e=document.querySelector(".spinner-overlay");e&&(e.classList.remove("enter"),setTimeout(function(){e.remove()},300))}dim(e=document.body,t,s){let n=`<div class="overlay" ${s?`style="top:${s}px"`:""}></div>`;e.insertAdjacentHTML("beforeend",n),t?setTimeout(()=>{e.querySelector(".overlay")?.classList.add("dimmed")},10):e.querySelector(".overlay").classList.add("dimmed")}undim(e=document.body,t){let s=e.querySelector(".overlay");t?(s.classList.remove("dimmed"),setTimeout(()=>s.remove(),280)):s.remove()}hideDuringTransform(e,t=280,s){e.classList.add("js-el-transform"),s&&e.querySelector(s)?.classList.add("js-el-transform-visible"),setTimeout(()=>{e.classList.remove("js-el-transform"),s&&e.querySelector(s)?.classList.remove("js-el-transform-visible")},t)}#d(){document.querySelectorAll("[data-bg-gradient]").forEach(t=>{let[s,i]=t.getAttribute("data-bg-gradient").split(",");Object.assign(t.style,{backgroundColor:i,backgroundImage:`linear-gradient(135deg, ${s} 10%, ${i} 100%)`})})}initInput(e=document){e.querySelectorAll("[data-input]").forEach(s=>{if(!s.parentNode.classList.contains("input-wrapper")){let i=document.createElement("div");if(i.classList.add("input-wrapper"),s.parentNode.insertBefore(i,s),i.appendChild(s),s.dataset.input==="outline"&&s.classList.add(s.tagName.toLowerCase()==="input"?"input-outline":"textarea-outline"),s.classList.contains("input-outline")||s.classList.contains("textarea-outline"))i.classList.add("input-wrapper-outline");else{let n=document.createElement("span");n.classList.add("input-bar"),s.after(n)}Array.from(s.parentNode.parentNode.children).forEach(n=>{n!==s&&n.tagName.toLowerCase()==="label"&&i.prepend(n)})}this.#o(s)})}#o(e){let t=e.closest(".input-group"),s=e.closest(".input-wrapper");t?.classList.remove("input-group-danger","input-group-success"),s?.classList.remove("input-wrapper-danger","input-wrapper-success","input-wrapper-disabled"),e.classList.contains("form-danger")&&(t?.classList.add("input-group-danger"),s.classList.add("input-wrapper-danger")),e.classList.contains("form-success")&&(t?.classList.add("input-group-success"),s.classList.add("input-wrapper-success")),e.disabled&&s.classList.add("md-input-wrapper-disabled"),e.value!==""?s.classList.add("input-filled"):s.classList.remove("input-filled"),e.classList.contains("label-fixed")&&s.classList.add("input-filled")}inputDisableSubmit(e){e.forEach(t=>{t.addEventListener("keyup",s=>{s.key==="Enter"&&s.preventDefault()})})}#h(){document.querySelectorAll("input[maxlength], textarea[maxlength]").forEach(t=>{let s=parseInt(t.getAttribute("maxlength"),10);if(!s)return;let i=null,n=t.getAttribute("data-counter-id");if(n&&(i=document.getElementById(n)),!i){let o=t.nextElementSibling;o&&o.classList.contains("char-counter")&&(i=o)}if(i){let a=t.closest("form")?.querySelector("button[type=submit]"),r=()=>{let l=t.value.trim().length;i.textContent=`${l} / ${s}`,a&&(a.disabled=l>s)};t.addEventListener("input",r),r()}})}#m(){document.querySelectorAll("textarea.autosize").forEach(t=>{let s=()=>{t.style.height="auto",t.style.height=t.scrollHeight+"px"};t.addEventListener("input",s),s()})}initFabSpeedDials(){let t=document.querySelectorAll(".fab-speed-dial > .fab"),s=(o,a)=>{let r=o.length-1;Array.from(o).forEach((l,h)=>{let m=a?(r-h)*18.18181818181818:h*18.18181818181818;l.style.animationDelay=`${m}ms`})},i=o=>{o.classList.remove("animOut"),o.classList.add("fab-speed-dial-active","animIn")},n=(o,a)=>{o.classList.remove("animIn"),o.classList.add("animOut"),setTimeout(()=>{o.classList.remove("fab-speed-dial-active","animOut")},40*a)};t.forEach(o=>{let a=o.closest(".fab-speed-dial"),r=a.querySelector(".fab-wrapper-inner");if(!r)return;let l=r.children,h=a.getAttribute("data-fab");if(h)try{if(h=JSON.parse(h),h.horizontal&&a.classList.add("fab-speed-dial-horizontal"),h.hover){let m;o.addEventListener("mouseenter",()=>{clearTimeout(m),s(l),i(a)}),a.addEventListener("mouseleave",()=>{s(l,!0),n(a,l.length),m=setTimeout(()=>{a.classList.remove("fab-speed-dial-active","animOut")},40*l.length)});return}}catch{console.warn("Invalid data-fab JSON:",h)}o.addEventListener("click",()=>{let m=a.classList.contains("fab-speed-dial-active");s(l,m),m?n(a,l.length):i(a)})})}initFabSheets(){document.querySelectorAll(".fab-sheet").forEach(t=>{let s=t.querySelector(".fab-sheet-trigger"),i=t.querySelector(".fab-sheet-actions");!s||!i||(s.addEventListener("click",n=>{n.stopPropagation();let o=i.children.length;t.classList.add("fab-animated"),setTimeout(()=>{t.style.width="200px",t.style.height=`${o*40+8}px`},140),setTimeout(()=>{t.classList.add("fab-active")},280)}),window.addEventListener("click",n=>{n.target.closest(".fab-sheet")||(t.style.width="",t.style.height="",t.classList.remove("fab-active"),setTimeout(()=>{t.classList.remove("fab-animated")},140))}))})}cardContentHide(e,t){let s=e.closest(".card");s.classList.contains("card-hidden")||(s.classList.add("card-hidden"),t&&s.insertAdjacentHTML("beforeend",'<div data-spinner="ratio: 2"></div>'))}cardContentShow(e,t){let s=e.closest(".card");s.classList.contains("card-hidden")&&(s.classList.remove("card-hidden"),t&&s.querySelector("[data-spinner]")?.remove())}#u(){let e=document.querySelectorAll(".js-card-toggle");if(!e.length)return;e.forEach(s=>{s.addEventListener("click",()=>{let i=s.closest(".card"),n=i.querySelector(".card-content");i.classList.contains("card-minimized")?(this.slideDown(n,880),i.classList.remove("card-minimized"),s.classList.toggle("mdi-window-minimize"),s.classList.toggle("mdi-window-maximize")):(i.classList.add("card-minimized"),s.classList.toggle("mdi-window-minimize"),s.classList.toggle("mdi-window-maximize"),this.slideUp(n,880))})});let t=document.querySelectorAll(".card-minimized");t.length&&t.forEach(s=>{let i=s.querySelector(".js-card-toggle"),n=s.querySelector(".card-content");n.style.display="none",i.classList.toggle("mdi-window-minimize"),i.classList.toggle("mdi-window-maximize")})}#p(){document.body.addEventListener("click",e=>{if(e.target.matches(".js-card-close")){let t=e.target.closest(".card");t.classList.add("animation-scale-up","animation-reverse"),t.addEventListener("animationend",()=>{this.elementRemove(t,100)},{once:!0})}},!0)}initAvatars(e=null){(e?e instanceof Element?[e]:Array.from(e):document.querySelectorAll(".avatar")).forEach(s=>{if(s.dataset.initialized==="true")return;s.dataset.initialized="true";let i=s.querySelector(".avatar-image"),n=s.querySelector(".avatar-initials");if(i&&n&&(i.onerror=()=>{i.style.display="none",n.style.display="flex",s.style.getPropertyValue("--avatar-bg")},i.complete&&i.naturalWidth!==0?(n.style.display="none",s.style.setProperty("--avatar-bg","transparent")):(i.style.display="none",n.style.display="flex",s.style.getPropertyValue("--avatar-bg"))),(!i||i.style.display==="none")&&!s.style.getPropertyValue("--avatar-color")){let o=getComputedStyle(s).getPropertyValue("--avatar-bg").trim(),a=this.hexToRgb(o);if(a){let l=.299*a.r+.587*a.g+.114*a.b>186?"black":"white";s.style.setProperty("--avatar-color",l)}}})}observeAvatarMutations(){new MutationObserver(t=>{for(let{addedNodes:s}of t)for(let i of s)if(i instanceof HTMLElement)if(i.classList.contains("avatar"))this.initAvatars(i);else{let n=i.querySelectorAll?.(".avatar");n?.length&&this.initAvatars(n)}}).observe(document.body,{childList:!0,subtree:!0})}hexToRgb(e){e=e.replace("#",""),e.length===3&&(e=e.split("").map(s=>s+s).join(""));let t=parseInt(e,16);return isNaN(t)?null:{r:t>>16&255,g:t>>8&255,b:t&255}}};var E=class{constructor(){}uniqueID(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=0;s<6;s++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}randomString(e){e=e>=1&&e<=16?e:16;let t=String(Date.now().toString(24)+Math.random().toString(24)).replace(/\./g,"");return t.substring(t.length-e)}randomNumber(e){e=e>=1&&e<=24?e:24;let t=String(Date.now().toString()+Math.random().toString()).replace(/\./g,"");return t=shuffle(t),t.substring(t.length-e)}shuffle(e){return[...e].sort(()=>Math.random()-.5).join("")}isNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)}isObject(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}isUrl(e){return/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gim.test(e)}isEmail(e){let t=/([a-z0-9!#$%&\'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?)/gim;return e.match(t)}getHashes(e){e.match(/#([A-Za-z0-9._-]+)/g)}getMentions(e){return e.match(/@\w+/g)}capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}camelCase(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,(t,s)=>s===0?t.toLowerCase():t.toUpperCase()).replace(/\s+/g,"")}kebabCase(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}slug(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}async copyToClipboard(e){try{await navigator.clipboard.writeText(e),console.log("Content copied to clipboard")}catch(t){console.error("Failed to copy: ",t)}}validateEmailAddress(e){var t=new RegExp(/^(("[\w-+\s]+")|([\w-+]+(?:\.[\w-+]+)*)|("[\w-+\s]+")([\w-+]+(?:\.[\w-+]+)*))(@((?:[\w-+]+\.)*\w[\w-+]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?(25[0-5]\.|2[0-4][\d]\.|1[\d]{2}\.|[\d]{1,2}\.)((25[0-5]|2[0-4][\d]|1[\d]{2}|[\d]{1,2})\.){2}(25[0-5]|2[0-4][\d]|1[\d]{2}|[\d]{1,2})\]?$)/i);return t.test(e)}lastUrl(e){let t=e.match(/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gim);return Array.isArray(t)&&t.length?t.pop():void 0}linkify(e){var t=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;return e.replace(t,function(s){return'<a href="'+s+'">'+s+"</a>"})}imageAllowed(e,t=5242880){return["jpeg","jpg","png","gif","webp"].indexOf(e.name.split(".").pop()==-1)?e.size>t?(deck.say(`Max File Size is ${t}`,"danger"),!1):!0:(deck.say("Wrong file type","danger"),!1)}frameYoutube(e,t="300px",s="100%"){return $("<iframe>",{src:`https://www.youtube.com/embed/${e}`,height:"300px",width:"100%",frameborder:0,allowfullscreent:1})}trimHtml(e){let s=e.match(/ +/g)[0].length,i=RegExp(`
 {${s}}`,"g");return e.replace(i,`
`).trim()}isHtmlString(e){return typeof e=="string"&&e.indexOf("<")>-1}stringToDom(e){if(e instanceof HTMLElement)return e;if(this.isHtmlString(e)){let t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild}return null}serialize(e){let t={};for(let[s,i]of e)t[s]!==void 0?(Array.isArray(t[s])||(t[s]=[t[s]]),t[s].push(i)):t[s]=i;return t}escapeHtml=e=>e.replace(/[&<>'"]/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"})[t]||t);unescapeHtml=e=>e.replace(/&amp;|&lt;|&gt;|&#39;|&quot;|&#x2F;|&#x60;|&#x3D;/g,t=>({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#x2F;":"/","&#x60;":"`","&#x3D;":"="})[t]||t);debounce(e,t,s){var i;return function(){var n=this,o=arguments,a=function(){i=null,s||e.apply(n,o)},r=s&&!i;clearTimeout(i),i=setTimeout(a,t),r&&e.apply(n,o)}}delay(e,t){let s=0;return function(...i){clearTimeout(s),s=setTimeout(e.bind(this,...i),t||0)}}extend(...e){let t={},s=!1,i=0,n=e.length;typeof e[0]=="boolean"&&(s=e[0],i++);let o=a=>{for(let r in a)Object.prototype.hasOwnProperty.call(a,r)&&(s&&Object.prototype.toString.call(a[r])==="[object Object]"?t[r]=this.extend(!0,t[r],a[r]):t[r]=a[r])};for(;i<n;i++){let a=e[i];o(a)}return t}deepClone(e){if(e===null)return null;let t=Object.assign({},e);return Object.keys(t).forEach(s=>t[s]=typeof e[s]=="object"?this.deepClone(e[s]):e[s]),Array.isArray(e)?(t.length=e.length,Array.from(t)):t}findObjectByKey(e,t,s){var i=function(){for(var n=0;n<e.length;n++)if(e[n][t]===s)return e[n];return null};return Promise.resolve(i()).catch(function(n){throw console.log("There has been a error: "+n.message),n})}replaceObjectKeys(e,t,s=""){return e=Object.entries(e).map(([i,n])=>(i=i==t?i:i.replace(t,s),i=i.charAt(0).toLowerCase()+i.slice(1),[i,n])),Object.fromEntries(e)}parseNestedDatasetKey(e,t,s){s=s||{};let i=e[0].substr(0,1).toLowerCase()+e[0].substr(1);return s[i]||(s[i]={}),e.length>1?(e.splice(0,1),s[i]=this.parseNestedDatasetKey(e,t,s[i])):s[i]=t,s}parseNestedDataset(e){let t=Object.keys(e),s={},i=null;for(let n=0;n<t.length;n++){let o=t[n],a=o.split("-");try{i=JSON.parse(e[o])}catch{i=e[o]}s=this.parseNestedDatasetKey(a,i,s)}return s}generateInitials(e){if(!e||typeof e!="string")return"";let t=e.trim().split(/\s+/);if(t.length===1)return t[0].slice(0,2).toUpperCase();let s=t[0][0]?.toUpperCase()||"",i=t[t.length-1][0]?.toUpperCase()||"";return s+i}};var I=class{constructor(e={}){this.type=e.type||null,this.timeout=e.timeout||4e3,this.position=e.position||"top-right"}notification(e,t={}){let s={};typeof e=="object"?s=e:(s.message=e,typeof t=="string"?s.type=t:typeof t=="object"&&Object.assign(s,t)),this.makeToast(s.message,s.type,s.timeout,s.position)}makeToast(e,t=this.type,s=this.timeout,i=this.position){let n=document.createElement("div");n.classList.add("toast","popover","newest",`toast-${i}`,`toast-${t}`),n.setAttribute("popover","manual");let o=document.createElement("div");o.classList.add("toast-message");let a=document.createElement("a");a.href="#",a.classList.add("icon-action","toast-close"),a.innerHTML=`
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
	<path d="m250.92-218.92-32-32L448-480 218.92-709.08l32-32L480-512l229.08-229.08 32 32L512-480l229.08 229.08-32 32L480-448 250.92-218.92Z"/>
 </svg>
`,a.addEventListener("click",r=>{r.preventDefault(),n.classList.add("toast-hide"),setTimeout(()=>n.remove(),300)}),o.innerHTML=e,n.appendChild(o),n.appendChild(a),document.body.appendChild(n),this.moveToasts(i),n.showPopover(),s&&setTimeout(()=>{n.classList.add("toast-hide"),setTimeout(()=>n.remove(),300)},s),n.addEventListener("toggle",r=>{r.newState==="open"?this.moveToasts(i):r.newState})}moveToasts(e){let t=e.match(/\b(top|bottom)\b/)?.[0]||null;t&&document.querySelectorAll(`.toast.toast-${e}`).forEach(i=>{if(i.classList.contains("newest"))i.style[t]="15px",i.classList.remove("newest");else{let n=i.style[t].replace("px",""),o=parseInt(n)+35;i.style[t]=`${o}px`}})}},R=I;var S=class extends v{constructor(e={}){super(),this.options=e instanceof Object?e:{},this.components={},this.instances={},this.events={},this.ui=new L,this.util=new E,this.notifier=new R,this.state=new Proxy(e.state||{},{set:(t,s,i)=>{return t[s]=i,this.emit("stateChange",{[s]:i}),!0;t[s]!==i&&(t[s]=i,this.emit("stateChange",{[s]:i}))}}),document.dispatchEvent(new CustomEvent("deck.ready",{detail:this}))}register(e){for(let t in e)this.components[t]=(...s)=>{let i=s[0]instanceof HTMLElement?s[0]:typeof s[0]=="string"?document.querySelector(s[0]):null,n=s[1]instanceof Object&&!(s[1]instanceof HTMLElement)?s[1]:s.length===1&&s[0]instanceof Object&&!(s[0]instanceof HTMLElement)?s[0]:void 0;return new e[t](i,n,this)}}autoload(e,t=document){(e instanceof Array?e:Object.keys(this.components)).forEach(i=>{t.querySelectorAll(`.${i}, [${i}], [data-${i}]`).forEach(o=>{try{let a=this.components[i](o);o.dataset.dci=a.dci,this.instances[o.dataset.dci]=a}catch(a){console.error(a)}})})}getInstance(e){let t;return typeof e=="string"?t=e:e instanceof HTMLElement&&(t=e.dataset.dci),t&&this.instances[t]||null}getState(e){return this.state[e]}setState(e,t){this.state[e]=t}say(...e){this.notifier.notification(...e)}};var d=class{constructor(e){this.dci=Math.random().toString(36).substring(2,9),this.name=null,this.type=null,this.element=null,this.debug=!1,this.storage=!1,this.stateKey=`${e.name}-${this.dci}`,this.state={},this.timeout=void 0,this.isTransitioning=!1,this.transitions={enter:!1,leave:!1},this.maxMobileWidth="640px",Object.assign(this,e),Object.assign(this,this.#e()),this.#t(),this.onStateChange=this.onStateChange||function(){},this.render=this.render||function(){},this.element&&!this.element.classList.contains(`${this.name}`)&&this.element.classList.add(`${this.name}`)}#e(){if(!this.element)return;let e=[this.name,`data-${this.name}`].find(n=>this.element.hasAttribute(n));if(!e)return!1;let t=this.element.getAttribute(e)?.trim();if(!t)return;let i=t.split(";").map(n=>n.trim()).filter(Boolean).reduce((n,o)=>{let[a,r]=o.split(":").map(l=>l.trim());return r.includes(",")?n[a]=r.split(",").map(l=>l.trim()):r.toLowerCase()==="true"?n[a]=!0:r.toLowerCase()==="false"?n[a]=!1:isNaN(r)?n[a]=r:n[a]=parseFloat(r),n},{});return Object.assign(this,i),i}init(){}initEvents(){}initState(){if(this.deck){let e=this.deck.getState(this.stateKey)||{};this.state={...e},this.deck.on("stateChange",t=>{t[this.stateKey]!==void 0&&(this.state={...this.state,...t[this.stateKey]},this.handleStateChange())})}}#t(){["local","session"].includes(this.storage)&&(this.storage={set:(e,t)=>{e=`${this.name}_${e}`,window[`${this.storage}Storage`].setItem(e,t)},get:e=>(e=`${this.name}_${e}`,window[`${this.storage}Storage`].getItem(e)),remove:e=>{e=`${this.name}_${e}`,window[`${this.storage}Storage`].removeItem(e)}})}updateState(e){let t={...this.state,...e};this.deck&&this.deck.setState(this.stateKey,t)}handleStateChange(){this.onStateChange(this.state)}onStateChange(e){}isMobile(){return window.matchMedia(`(max-width: ${this.maxMobileWidth})`).matches}debug(e,t="error"){this.debug&&console[t](e)}setTimeout=(e,t)=>{clearTimeout(this.timeout),this.timeout=setTimeout(e,t)};on(e,t,s=!1){this.element&&this.element.addEventListener(e,t,s)}off(e,t,s=!1){this.element&&this.element.removeEventListener(e,t,s)}one(e,t){this.element&&this.element.addEventListener(e,t,{once:!0})}dispatchEvent=(e,t=null,s=!1,i=this.element)=>{if(!i)return;let n=s?new CustomEvent(e,{detail:t,bubbles:!0,cancelable:!0}):new Event(e,{bubbles:!0,cancelable:!0});return!i.dispatchEvent(n)||n.defaultPrevented?!1:(this.deck&&this.deck.emit(e,t),!0)};destroy(){this.element&&this.#s(this.element,this.component.name)}#s=(e,t)=>{e&&e[Deck.config.elementPropName]&&delete e[Deck.config.elementPropName][t]}};var x=class extends d{constructor(e,t={},s=null){let n={...{allowMultiple:!1,noCollapse:!1},...t},o={name:"accordion",element:e,deck:s,...n};super(o),this.element.addEventListener("click",this.onClick),this._init()}_init(){this.element.querySelectorAll("li").forEach(e=>{let t=e.querySelector(".accordion-content"),s=e.classList.contains("open");e.setAttribute("aria-expanded",s?"true":"false"),s&&t&&(t.style.maxHeight=t.scrollHeight+"px")})}onClick=e=>{if(e.target&&e.target.classList.contains("accordion-title")){var t=e.target.closest("li");if(!t)return;this.toggle(this.getLiIndex(t))}};open(e){if(!e&&!Number.isInteger(e))return;let t=this.getTab(e);if(!t||t.classList.contains("open"))return;let s=t.querySelector(".accordion-content");this.allowMultiple||this.closeSiblings(e),t.classList.add("open"),t.setAttribute("aria-expanded","true"),s&&(s.style.maxHeight=s.scrollHeight+"px")}close(e){if(!e&&!Number.isInteger(e))return;let t=this.getTab(e);if(!t||!t.classList.contains("open"))return;let s=t.querySelector(".accordion-content");t.classList.remove("open"),t.setAttribute("aria-expanded","false"),s&&(s.style.maxHeight="0px")}toggle(e){if(!Number.isInteger(e))return;let t=this.getTab(e);if(!t)return;t.classList.contains("open")?(!this.noCollapse||this.getOpen().length>1)&&this.close(e):this.open(e)}closeSiblings(e){this.element.querySelectorAll("li").forEach((t,s)=>{s!==e&&this.close(s)})}closeAll(){this.element.querySelectorAll("li").forEach((e,t)=>this.close(t))}getTab(e){return this.element.getElementsByTagName("li")[e]}getOpen(){let e=[];return this.element.querySelectorAll("li.open").forEach(t=>{let s=this.getLiIndex(t);s!==-1&&e.push(s)}),e}getLiIndex(e){let t=e?.parentNode;return Array.prototype.indexOf.call(t?.children||[],e)}};var q=class extends d{constructor(e,t={},s=null){if(!(e instanceof HTMLDialogElement))throw new Error("Element must be a <dialog> for Modal class.");let n={...{},...t},o={name:"modal",element:e,deck:s,...n};super(o),this.#e(),this.#t()}#e(){let e=this.element;e.hasAttribute("data-modal-full")&&e.classList.add("modal-full");let t=e.dataset.modalSize;t&&e.classList.add(`modal-${t}`);let s=e.dataset.modalTransition||"center";e.classList.add(`modal-slide-${s}`),e.hasAttribute("data-modal-scrollable")&&e.classList.add("modal-scrollable")}#t(){this.element.querySelectorAll(".modal-close, .modal-close-button").forEach(e=>{e.addEventListener("click",()=>this.close())}),this.element.addEventListener("cancel",e=>{e.preventDefault(),this.close()}),this.bgClose!==!1&&this.element.addEventListener("click",e=>{e.target===this.element&&this.close()}),el.addEventListener("keydown",this.#s)}#s=e=>{if(e.key!=="Tab")return;let t=this.element.querySelectorAll('a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])'),s=Array.from(t),i=s[0],n=s[s.length-1];!i||!n||(e.shiftKey&&document.activeElement===i?(n.focus(),e.preventDefault()):!e.shiftKey&&document.activeElement===n&&(i.focus(),e.preventDefault()))};#i(){let e=this.element.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');e&&e.focus()}open(){this.dispatchEvent("beforeshow",{},!0),this.isOpen()||(this.element.showModal(),setTimeout(()=>this.#i(),10)),this.dispatchEvent("shown",{},!0)}close(){this.dispatchEvent("beforehide",{},!0),this.isOpen()&&this.element.close(),this.dispatchEvent("hidden",{},!0)}isOpen(){return this.element.open}setModalPosition(){if(this.position)switch(this.element.style.position="absolute",this.position){case"top":this.element.style.top="10%",this.element.style.transform="translateX(-50%)";break;case"bottom":this.element.style.bottom="10%",this.element.style.transform="translateX(-50%)";break;case"center":default:this.element.style.top="50%",this.element.style.transform="translate(-50%, -50%)";break}}},U=q;var M=class extends d{constructor(e,t={},s=null){let n={...{},...t},o={name:"tab",element:e,deck:s,...n};super(o),this.#e(),this.element.addEventListener("click",this.onClick)}#e(){this.length=this.element.querySelectorAll("li").length,this.content=null,this.target?this.content=document.querySelector(this.target):(this.content=this.element.nextElementSibling,this.content&&!this.content.classList.contains("tab-content")&&(this.content=null));var e=this.getActiveIndex()!==-1?e:0;this.open(e)}onClick=e=>{let s=e.target.closest(".tab > li");if(s&&!s.classList.contains("disabled")&&s.parentElement.classList.contains("tab")){let n=Array.from(s.parentElement.children).indexOf(s);n!==-1&&this.open(n)}};getActiveIndex(){var e=Array.from(this.element.children),t=-1;return e.forEach((s,i)=>{s.classList.contains("active")&&(t=i)}),t}open(e=0){var t=Array.from(this.element.children);if(t.forEach(i=>{i.classList.remove("active")}),this.content){var s=Array.from(this.content.children);s.forEach(i=>{i.classList.remove("active")})}e>=0&&e<t.length?(t[e].classList.add("active"),this.content&&s[e].classList.add("active")):console.error("Index out of range")}},V=M;var D=class extends d{constructor(e,t={},s=null){let n={...{allowMultiple:!1},...t},o={name:"nav",element:e,deck:s,...n};super(o),this.#e(),this.element.addEventListener("click",this.onClick)}#e(){let e=this.element.hasAttribute("data-open");this.element.querySelectorAll(".nav-sub").forEach(t=>{let s=t.closest("li");s&&s.classList.add("parent")}),e&&this.element.querySelectorAll("li.parent").forEach(t=>{t.classList.add("open")}),this.element.querySelectorAll("li.active").forEach(t=>{let s=t.closest("li.parent");for(;s;)s.classList.add("open"),s=s.parentElement.closest("li.parent")})}onClick=e=>{let s=e.target.closest("li");if(s){let i=s.closest(".nav"),n=i.hasAttribute("data-open"),o=i.hasAttribute("data-multiple"),a=i.querySelectorAll("li");s.classList.contains("parent")?n?s.classList.add("open"):(o||a.forEach(l=>{l.classList.contains("parent")&&l!==s&&l.classList.remove("open")}),s.classList.toggle("open")):(a.forEach(l=>{l.classList.remove("active")}),s.classList.add("active"))}}},Z=D;var g=class extends d{constructor(e,t={},s=null){let n={...{mode:"click",position:"bottom-center",offset:10,stretch:null,width:null,height:null},...t},o={name:"drop",element:e,deck:s,...n};e.classList.contains("dropdown")&&(e.classList.add("drop"),o.name="dropdown"),super(o),this.#e(),this.initEvents()}#e(){if(this.target)this.toggle=document.querySelector(this.target);else{let t=this.element.previousElementSibling;t&&(this.toggle=t)}if(!this.toggle)return;this.toggleParent=this.toggle.parentElement,window.getComputedStyle(this.toggleParent).position!=="relative"&&(this.toggleParent.style.position="relative")}initEvents(){this.mode==="click"?this.toggle.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),this.toggleDrop()}):(this.toggle.addEventListener("mouseover",this.show),this.toggle.addEventListener("mouseleave",()=>{this.hideTimeout=setTimeout(this.hide,1500)}),this.element.addEventListener("mouseover",()=>{clearTimeout(this.hideTimeout)}),this.element.addEventListener("mouseleave",()=>{this.hideTimeout=setTimeout(this.hide,1500)})),document.addEventListener("click",e=>this.#t(e)),document.getElementById("main").addEventListener("scroll",()=>this.#s())}#t(e){let t=e.target,s=!1;for(;t;){if(t===this.dropElement){s=!0;break}t=t.parentElement}!s&&this.element.classList.contains("open")&&this.hide()}#s(){if(this.element.classList.contains("open")){let e=this.element.getBoundingClientRect();(e.bottom<0||e.top>window.innerHeight||e.top<0||e.bottom>window.innerHeight)&&this.hide()}}toggleDrop=()=>{this.element.classList.toggle("open"),this.positionDrop(),this.#i()};show=()=>{clearTimeout(this.hideTimeout),this.element.classList.add("open"),this.positionDrop(),this.#i()};hide=()=>{this.element.classList.remove("open"),this.#i()};#i(){let e=this.toggle.querySelector("svg");e&&(e.style.transform==="rotate(180deg)"?e.style.transform="rotate(0deg)":e.style.transform="rotate(180deg)",e.style.transition="transform 0.3s ease-in-out")}positionDrop(){let e=this.toggle.getBoundingClientRect(),t=this.element.getBoundingClientRect();if(this.width){let n=this.width==="match"?e.width+"px":this.width;this.element.style.width=n}this.height&&(this.element.style.height=this.height);let s,i;if(this.stretch){let n=this.toggleParent.getBoundingClientRect();if(typeof this.stretch=="string"&&this.stretch.trim()!==""){let o=this.element.closest(this.stretch);if(!o)return;let a=o.getBoundingClientRect();s=e.height+this.offset,i=-(n.left-a.left),this.element.style.width=a.width+"px"}else{let o=this.toggleParent.parentElement.getBoundingClientRect();s=e.height+this.offset,i=-(n.left-o.left),this.element.style.width=o.width+"px"}}else switch(this.position){case"top-left":s=-(t.height+this.offset),i=0;break;case"top-center":s=-(t.height+this.offset),i=-((t.width-e.width)/2);break;case"top-right":s=-(t.height+this.offset),i=-(t.width-e.width);break;case"bottom-left":s=e.height+this.offset,i=0;break;case"bottom-center":s=e.height+this.offset,i=-((t.width-e.width)/2);break;case"bottom-right":s=e.height+this.offset,i=-(t.width-e.width);break;case"left-top":s=-t.height,i=-(t.width+this.offset);break;case"left-center":s=-((t.height-e.height)/2),i=-(t.width+this.offset);break;case"left-bottom":s=e.height,i=-(t.width+this.offset);break;case"right-top":s=-t.height,i=e.width+this.offset;break;case"right-center":s=-((t.height-e.height)/2),i=e.width+this.offset;break;case"right-bottom":s=e.height,i=e.width+this.offset;break;default:s=e.height+this.offset,i=0}if(this.dropbar){let n=this.toggleParent.getBoundingClientRect(),o=this.element.closest(".dropnav");if(!o)return;let a=o.getBoundingClientRect();s=e.height+this.offset,i=-(n.left-a.left),this.element.style.width=a.width+"px"}this.element.style.top=`${s}px`,this.element.style.left=`${i}px`}};var T=class extends d{constructor(e,t={},s=null){let n={...{},...t},o={name:"lightbox",element:e,deck:s,...n};super(o),this.element.classList.remove("lightbox"),this.element.querySelector("a").addEventListener("click",this.onClick)}onClick=e=>{e.preventDefault();let t=e.target,s=t.getAttribute("data-caption"),i=t.getAttribute("href");this.close(),this.open(i,s)};close(){let e=document.querySelector(".lightbox.open");e&&e.parentElement.removeChild(e)}open(e,t=!1){let s=document.createElement("div");s.classList.add("lightbox","lightbox-panel","transition-toggle","overflow-hidden","open");let i=document.createElement("div");i.classList.add("lightbox-items"),s.appendChild(i);let n=document.createElement("div");n.classList.add("lightbox-toolbar","position-top","text-right","transition-slide-top","transition-opaque");let o=document.createElement("a");o.setAttribute("href","#!"),o.classList.add("icon-action","lightbox-toolbar-icon");let a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("viewBox","0 -960 960 960"),a.setAttribute("width","100"),a.setAttribute("height","100"),a.classList.add("icon-32");let r=document.createElementNS("http://www.w3.org/2000/svg","path");if(r.setAttribute("d","m250.92-218.92-32-32L448-480 218.92-709.08l32-32L480-512l229.08-229.08 32 32L512-480l229.08 229.08-32 32L480-448 250.92-218.92Z"),a.appendChild(r),o.appendChild(a),o.appendChild(a),n.appendChild(o),s.appendChild(n),t){let m=document.createElement("div");m.classList.add("lightbox-toolbar","lightbox-caption","position-bottom","text-center","transition-slide-bottom","transition-opaque"),m.innerHTML=t,s.appendChild(m)}let l=document.createElement("div");l.classList.add("active"),i.appendChild(l);let h=document.createElement("img");h.src=e,h.alt="Lightbox Image",l.appendChild(h),o.addEventListener("click",function(){s.classList.remove("open"),document.body.removeChild(s)}),document.body.appendChild(s)}next(){}previous(){}};var C=class extends d{constructor(e,t={},s=null){let n={...{overlay:!1,flip:!1,bgClose:!0},...t},o={name:"offcanvas",element:e,deck:s,...n};super(o),this.#e()}#e(){this.element.querySelectorAll(".offcanvas-close").forEach(e=>{e.addEventListener("click",()=>{this.close()})}),this.bgClose&&document.addEventListener("click",e=>{this.isOpen()&&!e.target.closest(".offcanvas")&&this.close()})}open(){this.dispatchEvent("beforeshow",{},!0),this.isOpen()||setTimeout(()=>{this.element.showModal(),this.element.classList.add("visible")},100),this.dispatchEvent("shown",{},!0)}close(){this.dispatchEvent("beforehide",{},!0),this.isOpen()&&(this.element.classList.add("closing"),this.element.classList.remove("visible"),setTimeout(()=>{this.element.classList.remove("closing"),this.element.close()},300)),this.dispatchEvent("hidden",{},!0)}isOpen(){return this.element.open}};var z=class c extends d{constructor(e,t={},s=null){let n={...{content:"statuses",feedSize:10,contentSelector:".card",contentLive:!0,animated:!0,apiQueryParams:["max_id"]},...t},o={name:"feed",element:e,deck:s,contentSize:0,contentEnd:!1,isLoading:!1,...n};super(o),this.apiEndpoint||=`/${this.name}${this.category?`/${this.category}`:""}${this.id?`/${this.id}`:""}${this.content?`/${this.content}`:""}`,this.wssEvent||=`feed:${this.name}${this.id?`:${this.id}`:""}`,this.prependItem=this.prependItem||function(){},this.appendItem=this.appendItem||function(){},this.appendItems=this.appendItems||function(){},this.deleteItem=this.deleteItem||function(){},this.actionHandler=this.actionHandler||function(){},this.#t(),this.getData(),this.#e(),this.#s(),this.connect}get first(){return this.element.children[0]}get last(){return this.element.children[this.element.children.length-1]}get length(){return this.element.children.length}get size(){return this.element.children.length}async observeIntersection(e){e[0].isIntersecting&&!this.isLoading&&(this.isLoading=!0,requestAnimationFrame(async()=>{await this.onScrollToEnd(),this.isLoading=!1}))}#e(){let e=this.element.nextElementSibling;(!e||!e.classList.contains("feed-end"))&&(e=document.createElement("span"),e.classList.add("label","feed-end"),e.textContent="Loading....",this.element.parentNode.insertBefore(e,this.element.nextSibling)),this.observer=new IntersectionObserver(this.observeIntersection.bind(this),{root:null,rootMargin:`0px 0px ${window.innerHeight*.2}px 0px`,threshold:0}),this.observer.observe(e)}#t(){this.observer=new MutationObserver(e=>{e.forEach(t=>{t.addedNodes.forEach(s=>this.onAddNode(s)),t.removedNodes.forEach(s=>this.onRemoveNode(s))})}),this.observer.observe(this.element,{childList:!0})}onScrollToTop(){this.trim(),this.contentEnd=this.contentSize<this.feedSize}async onScrollToEnd(){this.contentSize>5&&await this.getData()}onAddNode(e){}onRemoveNode(e){}async getData(){if(this.contentEnd||!this.apiEndpoint||!this.element)return;this.length&&(this.max_id=this.last.dataset.id);let e=this.apiQueryParams.map(s=>this[s]?`${s}=${this[s]}`:"").filter(Boolean).join("&"),t=`/api${this.apiEndpoint}?${e}`.trim().replace(/\?$/,"");try{let s=await fetch(t);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);let i=await s.json();this.appendItems(i)}catch(s){console.error(s)}}#s(){this.element.addEventListener("click",this.onClick.bind(this))}onClick=e=>{};#i(){this.contentLive&&this.wssEvent&&!this.deck.hasEvent()&&this.deck.on(this.wssEvent,this.onDatum.bind(this))}get connect(){this.subscribe()}get disconnect(){this.unsubscribe()}subscribe(){this.#i(),this.deck.send({request:"subscribe",type:this.name,id:this.id})}unsubscribe(){this.deck.send({request:"unsubscribe",type:this.name,id:this.id})}onDatum(e){e.data.length&&e.data.forEach((t,s)=>{setTimeout(()=>{this.prependItem(t)},500)})}trim(){this.contentSize>this.feedSize&&(Array.from(this.element.children).slice(this.feedSize).forEach(t=>t.remove()),this.update())}prependItem(e){this.element.insertBefore(this.renderItem([e]),this.element.firstChild),this.contentSize>this.feedSize?this.element.lastElementChild.remove():this.contentSize+=1,this.max_id=this.last.dataset.id,this.dispatchEvent(`${this.name}.${this.id}.update`)}appendItems(e){if(!e.data.length){this.contentEnd=!0;return}if(this.contentEnd=e.data.length<this.feedSize,this.animated){let t=e.data.map((s,i)=>new Promise(n=>{setTimeout(()=>{let o=this.renderItem([s],!1),a=document.createElement("div");a.innerHTML=o;let r=a.firstElementChild;r.classList.add("animation-slide-bottom-medium"),r.addEventListener("animationend",()=>{r.classList.remove("animation-slide-bottom-medium")}),this.element.appendChild(r),n()},40*(i+1))}));Promise.all(t).then(()=>{this.update()})}else this.element.insertAdjacentHTML("beforeend",this.renderItem(e.data))}update(){this.contentSize=this.length,this.max_id=this.last.dataset.id,this.contentEnd=this.contentSize<this.feedSize,this.dispatchEvent(`${this.name}.${this.id}.update`)}formatDate(e){let t=new Date(e+"Z"),s=t.toLocaleDateString("en-US",{month:"short",day:"2-digit"}),i=t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1});return`${s} ${i}`}renderItem(){}async hydrate(){if(!this.id)throw new Error("Feed identifier is missing");let e=await c.#n(identifier);if(!e)throw new Error("Feed data could not be fetched");return Object.assign(this,e),e}static async asJSON(e){return this.#n(e)}static async#n(e){let s=`/api/feed?${`id=${e}`}`,i=await fetch(s).catch(()=>null);return!i||!i.ok?null:i.json().catch(()=>null)}},A=z;var N=class extends A{constructor(e,t={},s=null){t=Object.assign({name:"wire",defaultSize:30,content:null,contentLive:!1,contentSelector:".news"},t),super(e,t,s),this.wssEvent=`feed:${this.name}:${this.id?`${this.id}`:"*"}`,this.contentLive=!0,this.connect}renderItem(e){return`
				${e.map((t,s)=>`
					<div class="news" data-id="${t.id}">
						<div class="content">
							<a href="${t.url}" target="_blank" rel="nofollow noreferrer noopener">
								<h2 class="title">${t.title}</h2>
								<span class="text-small text-muted">${t.name} - ${this.formatDate(t.date)}</span>
							</a>
						</div>
					</div>`).join("")}
				`}},_=N;var P=class extends d{constructor(e,t={},s=null){let n={...{target:null,mode:null,cls:null,animation:null,duration:500},...t},o={name:"toggle",element:e,deck:s,...n};super(o),this.#e(),this.#t()}#e(){!this.target&&this.element.tagName==="A"&&(this.target=this.element.getAttribute("href")),this.items=document.querySelectorAll(`${this.target}`)}#t(){this.element.addEventListener("click",e=>{e.stopPropagation(),this.items.forEach(t=>{if(t instanceof HTMLDialogElement){t.open?t.close():t.showModal();return}this.cls?t.classList.toggle(this.cls):t.hidden=!t.hidden})})}},K=P;var B=class extends d{constructor(e,t={},s=null){let n={...{},...t},o={name:"drilldown",element:e,deck:s,...n};super(o),this.#e()}#e(){let e=this.element.querySelector(".header");this.$backBtn=e.querySelector(".back-btn"),this.$title=e.querySelector(".title"),this.titleText=this.$title?.textContent.trim()||"",this.$description=e.querySelector(".description"),this.descriptionText=this.$description?.textContent.trim()||"",this.$menu=this.element.querySelector(".menu"),this.$menu.addEventListener("click",t=>{let s=t.target.closest("a");if(!s||!this.$menu.contains(s))return;let i=s.nextElementSibling||null;if(s&&i&&i.tagName==="DIV"){t.stopPropagation(),t.preventDefault(),s.parentElement.classList.add("active"),this.$backBtn.style.display="block";let o=s.querySelector(".title")?.textContent.trim()||"",a=s.querySelector(".description")?.textContent.trim()||"";this.updateHeader(o,a)}}),this.$backBtn.addEventListener("click",()=>{event.stopPropagation();let t=this.element.querySelectorAll(".menu-item.active");t[t.length-1].classList.remove("active"),t.length-1===0&&(this.$backBtn.style.display="none",this.updateHeader(this.titleText,this.descriptionText))})}updateHeader(e,t){let s=this.element.querySelector(".header .header-info");e!==void 0?(this.$title||(this.$title=document.createElement("h3"),this.$title.className="title",s.appendChild(this.$title)),this.$title.textContent=e):this.$title&&(this.$title.remove(),this.$title=null),t!==void 0?(this.$description||(this.$description=document.createElement("p"),this.$description.className="description",s.appendChild(this.$description)),this.$description.textContent=t):this.$description&&(this.$description.remove(),this.$description=null)}},J=B;var H=class c{static imageFormats=["png","jpg","jpeg","webp","gif"];static videoFormats=["mp4","m4v","webm"];static audioFormats=["aac","mp3","weba"];constructor(e=10485760,t=[]){this.maxSize=e,this.acceptedTypes=t}isValidSize(e){return e.size<=this.maxSize}isValidType(e){let t=e.name.split(".").pop().toLowerCase();return c.imageFormats.includes(t)||c.videoFormats.includes(t)||c.audioFormats.includes(t)}getFileType(e){let t=e.split(".").pop().toLowerCase();return c.imageFormats.includes(t)?"image":c.videoFormats.includes(t)?"video":c.audioFormats.includes(t)?"audio":"file"}},F=class extends d{constructor(e,t={},s=null){let n={...{wrapper:document.body,multiple:!1,autoUpload:!0,method:"post",limit:-1,accept:"*",headers:{},data:{},maxSize:10485760,acceptedTypes:[],userId:"anonymous",withCredentials:!1,usePresigned:!0,url:"/api/upload/multipart",presignUrl:"/api/upload/presign",streamUrl:"/api/upload/stream",target:""},...t},o={name:"uploader",element:e,deck:s,...n};super(o),this.uploadFiles=[],this.fileValidator=new H(this.maxSize,this.acceptedTypes),this.#e()}#e(){if(this.input=this.createInputElement(),this.input.addEventListener("change",e=>{let t=Array.from(e.target.files);this.dispatchEvent("choose",{files:t},!0)!==!1&&this.loadFiles(t)}),this.element.insertAdjacentElement("afterend",this.input),this.element.tagName==="A"||this.element.tagName==="BUTTON"){this.element.addEventListener("click",()=>this.chooseFile());return}this.element.tagName==="DIV"&&this.element.classList.contains("upload-drop")&&(this.element.addEventListener("dragover",this.handleDragOver.bind(this)),this.element.addEventListener("dragleave",this.handleDragLeave.bind(this)),this.element.addEventListener("drop",this.handleDrop.bind(this))),this.element.addEventListener("click",()=>this.chooseFile())}createInputElement(){let e=document.createElement("input");return Object.assign(e,{type:"file",accept:this.accept,multiple:this.multiple,hidden:!0}),e}chooseFile(){this.input.value="",this.input.click()}loadFiles(e){if(this.limit!==-1&&e.length+this.uploadFiles.length>this.limit){this.dispatchEvent("exceed",{files:e},!0);return}e.forEach(t=>{if(!this.fileValidator.isValidSize(t)){this.dispatchEvent("error",{message:"File too large",file:t},!0);return}if(!this.fileValidator.isValidType(t)){this.dispatchEvent("error",{message:"Invalid file type",file:t},!0);return}this.uploadFiles.push({uid:Math.random().toString(36).substr(2,10),rawFile:t,fileName:t.name,size:t.size,status:"ready"})}),this.dispatchEvent("change",this.uploadFiles),this.autoUpload&&this.upload()}removeFile(e){this.uploadFiles=this.uploadFiles.filter(t=>t.uid!==e.uid),this.dispatchEvent("change",this.uploadFiles)}async upload(e){let t=e?[e]:this.uploadFiles.filter(s=>s.status==="ready");for(let s of t)this.method==="stream"?await this.stream(s):this.method==="put"?await this.put(s):await this.post(s)}handleDragOver(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy",this.element.classList.add("dragover")}handleDragLeave(e){this.element.classList.remove("dragover")}handleDrop(e){e.preventDefault(),e.stopPropagation();let t=Array.from(e.dataTransfer.files);this.dispatchEvent("choose",{files:t},!0)!==!1&&this.loadFiles(t),e.target.style.border=""}async post(e){try{let{presignUrl:s,data:i,headers:n,withCredentials:o,usePresigned:a}=this;var t=`${this.url}${uploadTarget?`/${uploadTarget}`:""}`;let r=new FormData;if(a){let h=await fetch(`${s}${uploadTarget?`/${uploadTarget}`:""}${e?.fileName?`?filename=${encodeURIComponent(e.fileName)}`:""}`);if(!h.ok)throw new Error("Failed to get presigned URL");let m=await h.json();e.type=this.fileValidator.getFileType(e.fileName),e.fileName=m.data.filename,t=m.data.url,Object.entries(m.data.fields).forEach(([u,k])=>{r.append(u,k)})}if(r.append("file",e.rawFile),Object.entries(i).forEach(([h,m])=>{r.append(h,m)}),!(await fetch(t,{method:"POST",body:r,headers:n,credentials:o?"include":"same-origin"})).ok)throw new Error("Upload failed");e.status="done",this.dispatchEvent("done",{file:e},!0)}catch(s){e.status="error",this.dispatchEvent("error",{message:s.message,file:e},!0)}}async put(e){try{let{presignUrl:s,data:i,headers:n,withCredentials:o,usePresigned:a}=this;var t=`${this.url}${uploadTarget?`/${uploadTarget}`:""}`;if(a){let h=await fetch(`${s}${uploadTarget?`/${uploadTarget}`:""}${e?.fileName?`?filename=${encodeURIComponent(e.fileName)}`:""}`);if(!h.ok)throw new Error("Failed to get presigned URL");let m=await h.json();e.type=this.fileValidator.getFileType(e.fileName),e.fileName=m.data.filename,t=m.data.url}let r=e.rawFile;if(!(await fetch(t,{method:"PUT",body:r,headers:n,credentials:o?"include":"same-origin"})).ok)throw new Error("Upload failed");e.status="done",this.dispatchEvent("done",{file:e},!0)}catch(s){e.status="error",this.dispatchEvent("error",{message:s.message,file:e},!0)}}async stream(e){try{let{streamUrl:t,headers:s,withCredentials:i,userId:n}=this,o=this.fileValidator.getFileType(e.fileName),a=e.rawFile.type||"application/octet-stream",r=new URLSearchParams({filename:e.fileName,type:a,userId:n,totalSize:e.size.toString()}).toString(),l=`${t}${uploadTarget?`/${uploadTarget}`:""}?${r}`,h=e.rawFile.stream(),m=h.getReader(),u=new EventSource(l),k=!1;u.onopen=()=>{k=!0,e.status="uploading",this.dispatchEvent("start",{file:e},!0)},u.addEventListener("s3progress",f=>{let p=JSON.parse(f.data);this.dispatchEvent("progress",{file:e,loaded:p.loaded,total:p.total,percentage:p.total?Math.round(p.loaded/p.total*100):0},!0)}),u.addEventListener("done",f=>{let p=JSON.parse(f.data);e.status="done",e.key=p.key,e.location=p.location,this.dispatchEvent("done",{file:e,result:p},!0),u.close()}),u.addEventListener("error",f=>{let p=JSON.parse(f.data||"{}");e.status="error",this.dispatchEvent("error",{message:p.message||"Streaming upload failed",file:e},!0),u.close()}),u.onerror=()=>{k||(e.status="error",this.dispatchEvent("error",{message:"Failed to establish streaming connection",file:e},!0),u.close())},(async()=>{try{if(!(await fetch(l,{method:"POST",body:h,headers:{...s,"Content-Type":a},credentials:i?"include":"same-origin",duplex:"half"})).ok)throw new Error("Streaming upload failed")}catch(f){e.status="error",this.dispatchEvent("error",{message:f.message,file:e},!0),u.close()}finally{m.cancel()}})()}catch(t){e.status="error",this.dispatchEvent("error",{message:t.message,file:e},!0)}}},W=F;var j=class c extends d{constructor(e,t={},s=null){let n={...{},...t},o={name:"user",element:e,deck:s,...n};super(o),this.hydrate().catch(a=>{throw new Error(`Failed to initialize user: ${a.message}`)})}#e(){console.log("User initialized")}async hydrate(){let e=this.id??this.username;if(!e)throw new Error("User identifier is missing");let t=await c.#t(e);if(!t)throw new Error("User data could not be fetched");return Object.assign(this,t),t}static async asJSON(e){return this.#t(e)}static async#t(e){let s=`/api/user?${typeof e=="number"?`id=${e}`:`username=${encodeURIComponent(e)}`}`,i=await fetch(s).catch(()=>null);return!i||!i.ok?null:i.json().catch(()=>null)}},Q=j;window.Deck=new S;window.Deck.register({accordion:x,modal:U,tab:V,nav:Z,drop:g,dropdown:g,lightbox:T,offcanvas:C,feed:A,wire:_,toggle:K,drilldown:J,uploader:W,user:Q});window.addEventListener("DOMContentLoaded",()=>{window.Deck.autoload()});
